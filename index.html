<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Pato Runner 2D - Game Over</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #cceeff;
      font-family: Arial, sans-serif;
      margin: 0;
      overflow: hidden;
      height: 100vh;
    }

    #game {
      position: relative;
      width: 800px;
      height: 250px;
      border: 2px solid #333;
      background: #cceeff;
      overflow: hidden;
      margin-top: 20px;
    }

    #pato {
      position: absolute;
      width: 48px;
      height: 48px;
      bottom: 40px;
      left: 50px;
      background: url("https://i.ibb.co/zxFmXHp/pato-sprite.png") 0 0/96px 48px;
      animation: patoRun 0.3s steps(2) infinite;
    }

    #chao {
      position: absolute;
      width: 100%;
      height: 40px;
      bottom: 0;
      background: #654321;
    }

    .obstaculo { position: absolute; bottom: 40px; }
    .arvore { width: 40px; height: 60px; background: green; }

    .tiro {
      position: absolute;
      width: 10px;
      height: 5px;
      background: red;
    }

    #score { position: absolute; top: 10px; right: 10px; font-weight: bold; font-size: 20px; }

    #gameOver {
      position: absolute;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      color: white;
      font-size: 36px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      display: none;
    }

    .game-btn { margin: 10px; padding: 10px 20px; font-size: 18px; cursor: pointer; border-radius: 8px; border: 2px solid #333; background: #ffcc00; }
    .game-btn:active { background: #ffaa00; }

    @keyframes patoRun { from { background-position: 0 0; } to { background-position: -96px 0; } }
  </style>
</head>
<body>
  <div id="game">
    <div id="pato"></div>
    <div id="chao"></div>
    <div id="score">0</div>
    <div id="gameOver">
      <div>üíÄ GAME OVER üíÄ</div>
      <button onclick="restartGame()" class="game-btn">REINICIAR</button>
    </div>
  </div>

  <div>
    <button id="jumpBtn" class="game-btn">‚¨ÜÔ∏è Pular</button>
    <button id="duckBtn" class="game-btn">‚¨áÔ∏è Abaixar</button>
    <button id="shootBtn" class="game-btn">üí• Atirar</button>
  </div>

  <script>
    const game = document.getElementById('game');
    const pato = document.getElementById('pato');
    const scoreDisplay = document.getElementById('score');
    const jumpBtn = document.getElementById('jumpBtn');
    const duckBtn = document.getElementById('duckBtn');
    const shootBtn = document.getElementById('shootBtn');
    const gameOverDiv = document.getElementById('gameOver');

    let isJumping = false;
    let isDucking = false;
    let position = 40;
    let score = 0;
    let gameRunning = true; // controla o estado do jogo

    function jump() {
      if (!gameRunning) return;
      if (isJumping) return;
      isJumping = true;
      pato.style.animationPlayState = 'paused';
      let upInterval = setInterval(() => {
        if (position >= 160) {
          clearInterval(upInterval);
          let downInterval = setInterval(() => {
            if (position <= 40) {
              clearInterval(downInterval);
              isJumping = false;
              pato.style.animationPlayState = 'running';
            }
            position -= 5;
            pato.style.bottom = position + 'px';
          }, 20);
        }
        position += 5;
        pato.style.bottom = position + 'px';
      }, 20);
    }

    function duck() {
      if (!gameRunning) return;
      if (isDucking || isJumping) return;
      isDucking = true;
      pato.style.height = '24px';
      pato.style.bottom = '40px';
      setTimeout(() => {
        pato.style.height = '48px';
        isDucking = false;
      }, 1000);
    }

    function shoot() {
      if (!gameRunning) return;
      const tiro = document.createElement('div');
      tiro.classList.add('tiro');
      tiro.style.left = '98px';
      tiro.style.bottom = position + 20 + 'px';
      game.appendChild(tiro);

      let tiroInterval = setInterval(() => {
        let tiroLeft = parseInt(tiro.style.left);
        if (tiroLeft > 800) {
          clearInterval(tiroInterval);
          if (game.contains(tiro)) game.removeChild(tiro);
        } else {
          tiro.style.left = tiroLeft + 10 + 'px';

          const obstaculos = document.querySelectorAll('.obstaculo');
          obstaculos.forEach(obs => {
            const obsLeft = parseInt(obs.style.left);
            const obsWidth = obs.offsetWidth;
            const obsBottom = parseInt(obs.style.bottom);
            const obsHeight = obs.offsetHeight;

            if (tiroLeft + 10 >= obsLeft && tiroLeft <= obsLeft + obsWidth &&
                position + 20 >= obsBottom && position + 20 <= obsBottom + obsHeight) {
              if (game.contains(obs)) game.removeChild(obs);
              if (game.contains(tiro)) game.removeChild(tiro);
              clearInterval(tiroInterval);
              score += 2;
              scoreDisplay.textContent = score;
            }
          });
        }
      }, 20);
    }

    function createObstacle() {
      if (!gameRunning) return;
      const obstaculo = document.createElement('div');
      obstaculo.classList.add('obstaculo','arvore');
      game.appendChild(obstaculo);

      let obstaculoPosition = 800;
      obstaculo.style.left = obstaculoPosition + 'px';

      let timer = setInterval(() => {
        if (!gameRunning) { clearInterval(timer); return; }
        if (obstaculoPosition < -50) {
          clearInterval(timer);
          if (game.contains(obstaculo)) game.removeChild(obstaculo);
          score++;
          scoreDisplay.textContent = score;
        } else if (obstaculoPosition > 50 && obstaculoPosition < 98 &&
                   position < 100) { // colis√£o
          gameOver();
          clearInterval(timer);
        }
        obstaculoPosition -= 5;
        obstaculo.style.left = obstaculoPosition + 'px';
      }, 20);

      setTimeout(createObstacle, Math.random()*3000+1000);
    }

    function gameOver() {
      gameRunning = false;
      gameOverDiv.style.display = 'flex';
    }

    function restartGame() {
      location.reload();
    }

    document.addEventListener('keydown', e => {
      if (e.code === 'Space' || e.code === 'ArrowUp') jump();
      if (e.code === 'ArrowDown') duck();
      if (e.code === 'KeyS') shoot();
    });

    jumpBtn.addEventListener('click', jump);
    duckBtn.addEventListener('click', duck);
    shootBtn.addEventListener('click', shoot);

    createObstacle();
  </script>
</body>
</html>
